<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>공지사항</title>
    <link rel="stylesheet" href="/css/notice/notice.css"/>
    <link rel="icon" type="image/png" href="/img/logo/favicon.png">
    <link rel="shortcut icon" type="image/x-icon" href="/img/favicon.ico">
</head>
<body>

<div class="kb-notice-container">
    <div class="kb-notice-card">

        <header class="kb-notice-header">
            <div class="kb-title-container">
                <img src="/img/logo/200px-안전네비_로고.png" alt="안전네비 로고" width="40">
                <h1 class="kb-title-text">안전네비</h1>
            </div>
            <h2 class="kb-page-title">공지사항</h2>
            <p class="kb-page-subtitle">안전네비의 새로운 소식과 알림을 확인하세요.</p>
        </header>

        <div class="kb-board-wrap">

            <table class="kb-board-table">
                <thead>
                <tr>
                    <th class="col-no">번호</th>
                    <th class="col-title">제목</th>
                    <th class="col-author">작성자</th>
                    <th class="col-date">작성일</th>
                    <th class="col-views">조회수</th>
                </tr>
                </thead>
                <tbody>

                <tr th:if="${paging.isEmpty()}">
                    <td colspan="5" style="text-align: center; padding: 30px;">
                        등록된 공지사항이 없습니다.
                    </td>
                </tr>

                <tr th:each="notice : ${paging.content}"
                    th:classappend="${notice.type == 'EMERGENCY' or notice.type == 'IMPORTANT'} ? 'kb-post-important'">

                    <td class="col-no">
                        <span th:if="${notice.type == 'EMERGENCY' or notice.type == 'IMPORTANT'}" class="badge-notice">공지</span>
                        <span th:unless="${notice.type == 'EMERGENCY' or notice.type == 'IMPORTANT'}" th:text="${notice.id}">15</span>
                    </td>

                    <td class="col-title">
                        <a th:href="@{/noticeDetail(id=${notice.id})}" style="display: block;">

                            <span th:if="${notice.type == 'EMERGENCY'}" style="color: red; font-weight: bold;">[긴급]</span>
                            <span th:if="${notice.type == 'IMPORTANT'}" style="color: #ff9800; font-weight: bold;">[중요]</span>

                            <span th:text="${notice.title}">제목입니다</span>
                        </a>
                    </td>

                    <td class="col-author" th:text="${notice.writerName}">관리자</td>

                    <td class="col-date" th:text="${#temporals.format(notice.createdDate, 'yyyy.MM.dd')}">2025.11.20</td>

                    <td class="col-views" th:text="${notice.viewCount}">0</td>
                </tr>
                </tbody>
            </table>
        </div>

        <div class="kb-pagination" th:if="${paging != null and paging.totalPages > 0}">

            <a th:href="@{/notice(page=${paging.number - 1}, keyword=${keyword})}"
               class="page-btn prev"
               th:if="${!paging.first}">&lt;</a>

            <a th:each="pageNum : ${#numbers.sequence(startPage, endPage)}"
               th:href="@{/notice(page=${pageNum - 1}, keyword=${keyword})}"
               th:text="${pageNum}"
               class="page-btn"
               th:classappend="${pageNum == (paging.number + 1)} ? 'active'">1</a>

            <a th:href="@{/notice(page=${paging.number + 1}, keyword=${keyword})}"
               class="page-btn next"
               th:if="${!paging.last}">&gt;</a>
        </div>

        <form action="/notice" method="get" class="kb-search-bar">
            <select class="search-select">
                <option value="title">제목</option>
            </select>
            <input type="text" name="keyword" th:value="${keyword}" class="search-input" placeholder="검색어를 입력하세요">
            <button type="submit" class="search-btn">검색</button>
        </form>

    </div>
</div>

</body>
</html>